# --------------------------------------------------------------------------
# Class definition of WebThread - this thread controls the REST API
#
# Author: Benjamin Fuchs
# License: GPL3
#
# Website: https://github.com/bablokb/nerd-alarmclock
#
# --------------------------------------------------------------------------

from BottleThread import BottleThread
from threading import Thread

class WebThread(Thread):
  """ Web thread """

  # initialize object   ----------------------------------------------------

  def __init__(self, settings):
    """ Constructor """

    super(WebThread,self).__init__(name="WebThread")
    self._settings = settings
    self._stop_event = settings.stop_event

  # run the thread   -------------------------------------------------------

  def run(self):
    """ run-method of thread """

    self._settings.log.msg("WebThread: running WebThread")
    bottleThread = BottleThread(self._settings)
    bottleThread.start()
    while not self._stop_event.wait(5):
       self._settings.log.msg("WebThread: running WebThread")

    self._settings.log.msg("WebThread: shutdown")
    bottleThread.shutdown()
